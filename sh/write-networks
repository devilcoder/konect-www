#! /bin/sh
#
# Write content of 'networks/index.html'.
#
# STDOUT
#	Content
# 
# INPUT FILES
#	dat/NETWORKS	List of all networks
#

set -e

[ -e dat/NETWORKS ]
count=$(echo $(<dat/NETWORKS wc -l))

cat <<EOF
<A HREF="../">KONECT</A> â€£
<H1>Networks</H1>
<P>KONECT has $count networks.</P>
<TABLE>
EOF
while IFS= read -r network ; do
	export network
	name=$(field=name sh/read-meta)
	category=$(field=category sh/read-meta)
	cat <<EOF 
<TR><TD><CODE>$(field=code sh/read-meta)</CODE><TD><A href="$network/">$name</A><TD>$category<TD>$(sh/read-format)<TD>$(sh/read-weights)
EOF
done <dat/NETWORKS
cat <<EOF
</TABLE>
EOF
